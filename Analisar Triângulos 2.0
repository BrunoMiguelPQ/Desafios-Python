from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.label import Label
from kivy.uix.textinput import TextInput
from kivy.uix.button import Button
from kivy.core.window import Window


class TrianguloApp(BoxLayout):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.orientation = 'vertical'
        self.padding = 20
        self.spacing = 10
        self.size_hint = (None, None)
        self.width = 320
        self.height = 400
        self.pos_hint = {'center_x': 0.5, 'center_y': 0.5}

        # Título
        self.add_widget(Label(
            text='Analisador de Triângulos',
            font_size=18,
            bold=True,
            size_hint=(1, None),
            height=40,
            color=(0, 0, 0, 1)
        ))

        # Entradas
        self.lado1 = TextInput(hint_text='Reta 1', multiline=False, input_filter='float', height=40, size_hint=(1, None), foreground_color=(0, 0, 0, 1))
        self.lado2 = TextInput(hint_text='Reta 2', multiline=False, input_filter='float', height=40, size_hint=(1, None), foreground_color=(0, 0, 0, 1))
        self.lado3 = TextInput(hint_text='Reta 3', multiline=False, input_filter='float', height=40, size_hint=(1, None), foreground_color=(0, 0, 0, 1))
        self.add_widget(self.lado1)
        self.add_widget(self.lado2)
        self.add_widget(self.lado3)

        # Resultado
        self.result_label = Label(
            text='Digite os três lados e clique em "Verificar"',
            size_hint=(1, None),
            height=100,
            halign='center',
            valign='middle',
            color=(0, 0, 0, 1)
        )
        self.result_label.text_size = (self.width - 40, None)
        self.add_widget(self.result_label)

        # Botão de verificação
        botao = Button(text='Verificar', size_hint=(1, None), height=40)
        botao.bind(on_press=self.verificar_triangulo)
        self.add_widget(botao)

    def verificar_triangulo(self, instance):
        try:
            n1 = float(self.lado1.text)
            n2 = float(self.lado2.text)
            n3 = float(self.lado3.text)

            if n1 < n2 + n3 and n2 < n1 + n3 and n3 < n1 + n2:
                if n1 == n2 == n3:
                    tipo = 'Triângulo EQUILÁTERO'
                elif n1 != n2 and n1 != n3 and n2 != n3:
                    tipo = 'Triângulo ESCALENO'
                else:
                    tipo = 'Triângulo ISÓSCELES'
                self.result_label.text = f"É possível formar um triângulo.\n{tipo}"
            else:
                self.result_label.text = "Não é possível formar um triângulo."
        except ValueError:
            self.result_label.text = "Por favor, preencha todos os campos com números válidos."


class TrianguloAppApp(App):
    def build(self):
        Window.clearcolor = (1, 1, 1, 1)  # fundo branco
        return TrianguloApp()


if __name__ == '__main__':
    TrianguloAppApp().run()
